version: 2
sources:
  - name: abc_bank
    database: PORTFOLIO_TRACKING
    schema: SOURCE_DATA
    tables:
      - name: ABC_BANK_POSITION
        description: >
          landing table 
          holding data imported from the CSV extracts from ABC back
        tests:
          - dbt_utils.unique_combination_of_columns:
              combination_of_columns:
              - ACCOUNTID
              - SYMBOL
        columns:
          - name: ACCOUNTID
            description: the code for the account at ABC Bank
            tests:
              - not_null
          - name: SYMBOL
            description: the symbol of the security at ABC Bank
            tests:
              - unique
              - not_null
          - name: DESCRIPTION
            description: the name of the security at ABC Bank
            tests:
              - not_null
          - name: EXCHANGE
            description: >
              The short name or code of the exchange
              where the security is traded.
            tests:
              - not_null
          - name: REPORT_DATE
            description: >
              The date of the report was extraced by ABC Bank.
              We consider this position to be effective from this date,
              until a change is seen
            tests:
              - not_null
          - name: QUANTITY
            description: >
              The number of securities we hold
              in the portfolio at ABC Bank
              at the Report Date.
            tests:
              - not_null
          - name: COST_BASE
            description: >
              The cost we paid for the securities.
            tests:
              - not_null
          - name: POSITION_VALUE
            description: >
              The value of the securities
              at ABC Bank
              on the Report Date.
            tests:
              - not_null
          - name: CURRENCY
            description: >
              The currency for the monetary amounts of the position.
            tests:
              - not_null
                  
                
            
                  
              
              